<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-beta.1/dist/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-beta.1/dist/js/select2.min.js"></script>
</head>
<style>
    body {
        background-color: darkgrey;
    }
    
    #heatcalc {
        margin-top: 10px;
        background-color: rgb(134, 133, 133);
        width: 60%;
        height: 75vh;
    }
    
    #navbar {
        background-color: rgb(100, 100, 100);
        height: 6vh;
        width: 75%;
        margin-top: 0px
    }
    
    .centered {
        margin-left: auto;
        margin-right: auto;
    }
    
    #heatcalcTable {
        width: 100%;
    }
    
    #heatCalcResults {
        margin-top: 5px;
        width: 95%;
    }
    
    table {
        border: 1px solid rgb(100, 100, 100);
        border-collapse: collapse;
    }
    
    .txtCentered {
        text-align: center;
    }
    
    .txtLeft {
        text-align: left;
    }
    
    .txtRight {
        text-align: right;
    }
    
    h1,
    h2,
    h3 {
        margin: 3px;
    }
    
    h1 {
        font-size: 2.7rem;
    }
    
    .resultCell {
        text-align: center;
    }
    
    #heatCalcResults tbody tr:nth-child(odd) {
        background-color: rgb(100, 100, 100);
    }
    
    #heatCalcResults tbody tr:nth-child(odd) td {
        border-left: 1px solid rgb(155, 155, 155);
        border-right: 1px solid rgb(155, 155, 155);
    }
    
    #heatCalcResults tbody tr:nth-child(even) {
        background-color: rgb(155, 155, 155);
    }
    
    #heatCalcResults tbody tr:nth-child(even) td {
        border-left: 1px solid rgb(100, 100, 100);
        border-right: 1px solid rgb(100, 100, 100);
    }
</style>

<body>
    <datalist id="listCpus"></datalist>
    <div id="navbar" class="centered"></div>
    <div id="heatcalc" class="centered">
        <table id="heatcalcTable" class="centered">
            <tr>
                <td colspan="2" class="txtCentered">
                    <h1>System caracteristics</h1>
                </td>
            </tr>
            <tr>
                <td class="txtCentered" colspan="2">
                    <h2>CPU</h2>
                </td>
            </tr>
            <tr>
                <td>
                    <select onchange="calculateHeat()" name="CPUSPicker" id="cpusHeatPicker"></select>
                </td>
            </tr>
            <tr>
                <td class="txtCentered" colspan="2">
                    <h2>CPU Cooler</h2>
                </td>
            </tr>
            <tr>
                <td>
                    <select onchange="calculateHeat()" name="CPUCoolerPicker" id="cpuCoolerHeatPicker"></select>
                </td>
            </tr>
            <tr>
                <td class="txtCentered" colspan="2">
                    <h2>GPU</h2>
                </td>
            </tr>
            <tr>
                <td>
                    <select onchange="calculateHeat()" name="GPUSPicker" id="gpusHeatPicker"></select>
                </td>
            </tr>
            <tr>
                <td class="txtCentered" colspan="2">
                    <h2>RAM</h2>
                </td>
            </tr>
            <tr>
                <td>
                    <select onchange="calculateHeat()" name="RAMPicker" id="ramHeatPicker"></select>
                </td>
            </tr>
            <tr>
                <td class="txtCentered" colspan="2">
                    <h2>Case</h2>
                </td>
            </tr>
            <tr>
                <td>
                    <select onchange="calculateHeat()" name="CASESPicker" id="casesHeatPicker"></select>
                </td>
            </tr>
            <tr>
                <td>
                    <select onchange="calculateHeat()" name="FANPicker" id="fanHeatPicker1"></select>
                    <input type="number" name="fanNumber" id="FanNumber1" placeholder="Quantity">
                </td>
            </tr>
            <tr>
                <td>
                    <input type="button" value="Add More" onclick="addMoreFans(this)">
                </td>
            </tr>
        </table>
        <table id="heatCalcResults" class="centered textCentered">
            <tr class="textCentered">
                <td class="textCentered resultCell">
                    <h3>Stat</h3>
                </td>
                <td class="textCentered resultCell">
                    <h3>Worst</h3>
                </td>
                <td class="textCentered resultCell">
                    <h3>Top 50%</h3>
                </td>
                <td class="textCentered resultCell">
                    <h3>Top 25%</h3>
                </td>
                <td class="textCentered resultCell">
                    <h3>Top 10%</h3>
                </td>
                <td class="textCentered resultCell">
                    <h3>Top 1%</h3>
                </td>
            </tr>
            <tr class="textCentered">
                <td class="textCentered resultCell">
                    <h3>CPU Idle</h3>
                </td>
                <td class="textCentered resultCell">
                    <h3></h3>
                </td>
                <td class="textCentered resultCell">
                    <h3></h3>
                </td>
                <td class="textCentered resultCell">
                    <h3></h3>
                </td>
                <td class="textCentered resultCell">
                    <h3></h3>
                </td>
                <td class="textCentered resultCell">
                    <h3></h3>
                </td>
            </tr>
            <tr class="textCentered">
                <td class="textCentered resultCell">
                    <h3>CPU Load</h3>
                </td>
                <td class="textCentered resultCell">
                    <h3></h3>
                </td>
                <td class="textCentered resultCell">
                    <h3></h3>
                </td>
                <td class="textCentered resultCell">
                    <h3></h3>
                </td>
                <td class="textCentered resultCell">
                    <h3></h3>
                </td>
                <td class="textCentered resultCell">
                    <h3></h3>
                </td>
            </tr>
            <tr class="textCentered">
                <td class="textCentered resultCell">
                    <h3>CPU Voltage</h3>
                </td>
                <td class="textCentered resultCell">
                    <h3></h3>
                </td>
                <td class="textCentered resultCell">
                    <h3></h3>
                </td>
                <td class="textCentered resultCell">
                    <h3></h3>
                </td>
                <td class="textCentered resultCell">
                    <h3></h3>
                </td>
                <td class="textCentered resultCell">
                    <h3></h3>
                </td>
            </tr>
            <tr class="textCentered">
                <td class="textCentered resultCell">
                    <h3>CPU Frequency</h3>
                </td>
                <td class="textCentered resultCell">
                    <h3></h3>
                </td>
                <td class="textCentered resultCell">
                    <h3></h3>
                </td>
                <td class="textCentered resultCell">
                    <h3></h3>
                </td>
                <td class="textCentered resultCell">
                    <h3></h3>
                </td>
                <td class="textCentered resultCell">
                    <h3></h3>
                </td>
            </tr>
            <tr class="textCentered">
                <td class="textCentered resultCell">
                    <h3>GPU Load</h3>
                </td>
                <td class="textCentered resultCell">
                    <h3></h3>
                </td>
                <td class="textCentered resultCell">
                    <h3></h3>
                </td>
                <td class="textCentered resultCell">
                    <h3></h3>
                </td>
                <td class="textCentered resultCell">
                    <h3></h3>
                </td>
                <td class="textCentered resultCell">
                    <h3></h3>
                </td>
            </tr>
            <tr class="textCentered">
                <td class="textCentered resultCell">
                    <h3>RAM Voltage</h3>
                </td>
                <td class="textCentered resultCell">
                    <h3></h3>
                </td>
                <td class="textCentered resultCell">
                    <h3></h3>
                </td>
                <td class="textCentered resultCell">
                    <h3></h3>
                </td>
                <td class="textCentered resultCell">
                    <h3></h3>
                </td>
                <td class="textCentered resultCell">
                    <h3></h3>
                </td>
            </tr>
            <tr class="textCentered">
                <td class="textCentered resultCell">
                    <h3>RAM Frequency</h3>
                </td>
                <td class="textCentered resultCell">
                    <h3></h3>
                </td>
                <td class="textCentered resultCell">
                    <h3></h3>
                </td>
                <td class="textCentered resultCell">
                    <h3></h3>
                </td>
                <td class="textCentered resultCell">
                    <h3></h3>
                </td>
                <td class="textCentered resultCell">
                    <h3></h3>
                </td>
            </tr>
        </table>
    </div>
</body>

<script>
    function readTextFile(file, callback) { //stole this from stackoverflow, works like a charm
        var rawFile = new XMLHttpRequest();
        rawFile.overrideMimeType("application/json");
        rawFile.open("GET", file, true);
        rawFile.onreadystatechange = function() {
            if (rawFile.readyState === 4 && rawFile.status == "200") {
                callback(rawFile.responseText);
            }
        }
        rawFile.send(null);
    }

    var myData

    //Open the data file, and also fire the whole code (since it's asynchronous, we must wait for it to load)
    readTextFile("https://raw.githubusercontent.com/Whitebowfr/PCBSGraph/gh-pages/helpers/data.json", function(text) {
        myData = JSON.parse(text);
        console.log(myData)
        for (category in myData) {
            console.log(category)
            if (category == "mobos" || category == "storage") continue
            else
                for (part in myData[category]) {
                    if (category != "coolers") {
                        var name = myData[category][part].fullName
                        document.getElementById(category + "HeatPicker").innerHTML += `<option value="${name}">${name}</option>`
                    } else {
                        var name = myData[category][part].fullName
                        switch (myData[category][part].type) {
                            case "Air Cooler":
                                var name = myData[category][part].fullName
                                document.getElementById("cpuCoolerHeatPicker").innerHTML += `<option value="${name}">${name}</option>`
                                break
                            case "Case Fan":
                                var name = myData[category][part].fullName
                                document.getElementById("fanHeatPicker1").innerHTML += `<option value="${name}">${name}</option>`
                                break
                        }
                    }
                }
            $("#" + category + "HeatPicker").select2()
        }
        $("#cpuCoolerHeatPicker").select2()
        $("#fanHeatPicker1").select2()
    });

    function addMoreFans(btn) {
        if (document.getElementsByName("fanNumber").length > 8) return false
        var tr = document.createElement("tr")
        tr.innerHTML = `<td>
                    <select onchange="calculateHeat()" name="FANPicker" id="fanHeatPicker${document.getElementsByName("fanNumber").length + 1}">
                        ${document.getElementById("fanHeatPicker1").innerHTML}    
                    </select>
                    <input type="number" name="fanNumber" id="FanNumber${document.getElementsByName("fanNumber").length + 1}" placeholder="Quantity">
                </td>`
        document.getElementById("heatcalcTable").firstElementChild.insertBefore(tr, btn.parentNode.parentNode)
        $(`#fanHeatPicker${document.getElementsByName("fanNumber").length}`).select2()
    }

    function calculateHeat() {
        console.log("eEEEE")
    }
</script>

</html>